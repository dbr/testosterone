import curses
import os

from testosterone.interactive.screens.summary import SummaryScreen
from testosterone.interactive.screens.detail import DetailScreen


class CursesInterface:

    def __init__(self, base, stopwords):
        self.base = base
        self.stopwords = stopwords
        curses.wrapper(self.wrapme)
        os.system('clear')

    def wrapme(self, win):
        self.win = win
        curses.curs_set(0) # Don't show the cursor.

        # colors
        bg = curses.COLOR_BLACK
        curses.init_pair(1, curses.COLOR_WHITE, bg)
        curses.init_pair(2, curses.COLOR_RED, bg)
        curses.init_pair(3, curses.COLOR_GREEN, bg)
        curses.init_pair(4, curses.COLOR_CYAN, bg)

        screen = SummaryScreen(self)
        #screen = DetailScreen(screen) # during dev
        try:
            while 1:
                # Each screen returns the next screen.
                # screens are responsible for their own error handling so that
                # they can return themselves and we can therefore get back to
                # them.
                screen = screen.go()
        except KeyboardInterrupt:
            pass
